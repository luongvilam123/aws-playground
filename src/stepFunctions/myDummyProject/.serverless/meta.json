{
  "/Users/lamluong/IdeaProjects/aws-playground/src/stepFunctions/myDummyProject/serverless.yml": {
    "versionFramework": "4.23.0",
    "servicePath": "/Users/lamluong/IdeaProjects/aws-playground/src/stepFunctions/myDummyProject/serverless.yml",
    "serviceConfigFileName": "serverless.yml",
    "service": {
      "service": "myDummyProject",
      "plugins": [
        "serverless-step-functions",
        "serverless-pseudo-parameters"
      ],
      "provider": {
        "name": "aws",
        "runtime": "python3.12",
        "stage": "dev",
        "region": "us-east-1",
        "versionFunctions": true,
        "compiledCloudFormationTemplate": {
          "AWSTemplateFormatVersion": "2010-09-09",
          "Description": "The AWS CloudFormation template for this Serverless application",
          "Resources": {
            "MyTestFunctionLogGroup": {
              "Type": "AWS::Logs::LogGroup",
              "Properties": {
                "LogGroupName": "/aws/lambda/myDummyProject-dev-myTestFunction"
              }
            },
            "IamRoleLambdaExecution": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": [
                          "lambda.amazonaws.com"
                        ]
                      },
                      "Action": [
                        "sts:AssumeRole"
                      ]
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": {
                      "Fn::Join": [
                        "-",
                        [
                          "myDummyProject",
                          "dev",
                          "lambda"
                        ]
                      ]
                    },
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "logs:CreateLogStream",
                            "logs:CreateLogGroup",
                            "logs:TagResource"
                          ],
                          "Resource": [
                            {
                              "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/myDummyProject-dev*:*"
                            }
                          ]
                        },
                        {
                          "Effect": "Allow",
                          "Action": [
                            "logs:PutLogEvents"
                          ],
                          "Resource": [
                            {
                              "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/myDummyProject-dev*:*:*"
                            }
                          ]
                        }
                      ]
                    }
                  }
                ],
                "Path": "/",
                "RoleName": {
                  "Fn::Join": [
                    "-",
                    [
                      "myDummyProject",
                      "dev",
                      {
                        "Ref": "AWS::Region"
                      },
                      "lambdaRole"
                    ]
                  ]
                }
              }
            },
            "MyTestFunctionLambdaFunction": {
              "Type": "AWS::Lambda::Function",
              "Properties": {
                "Code": {
                  "S3Bucket": "serverless-framework-deployments-us-east-1-e50dbcdd-e8ba",
                  "S3Key": "serverless/myDummyProject/dev/1763434535298-2025-11-18T02:55:35.298Z/myDummyProject.zip"
                },
                "Handler": "handler.myTestFunction",
                "Runtime": "python3.12",
                "FunctionName": "myDummyProject-dev-myTestFunction",
                "MemorySize": 1024,
                "Timeout": 6,
                "Role": {
                  "Fn::GetAtt": [
                    "IamRoleLambdaExecution",
                    "Arn"
                  ]
                }
              },
              "DependsOn": [
                "MyTestFunctionLogGroup"
              ]
            },
            "MyTestFunctionLambdaVersionwhf0isdNfUr0yAGfiRJ0SbPVJm6zBRSBm3qZRQ2KlZQ": {
              "Type": "AWS::Lambda::Version",
              "DeletionPolicy": "Retain",
              "Properties": {
                "FunctionName": {
                  "Ref": "MyTestFunctionLambdaFunction"
                },
                "CodeSha256": "l51RiBB0rTilONjan+MaU8LepSXkl+WwgweSJT1y72E="
              }
            },
            "MyStateMachineRole": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": {
                          "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                        }
                      },
                      "Action": "sts:AssumeRole"
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": "dev-myDummyProject-statemachine",
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "lambda:InvokeFunction"
                          ],
                          "Resource": [
                            {
                              "Fn::GetAtt": [
                                "hello",
                                "Arn"
                              ]
                            },
                            {
                              "Fn::Sub": [
                                "${functionArn}:*",
                                {
                                  "functionArn": {
                                    "Fn::GetAtt": [
                                      "hello",
                                      "Arn"
                                    ]
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "Hellostepfunc2StepFunctionsStateMachineRole": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": {
                          "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                        }
                      },
                      "Action": "sts:AssumeRole"
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": "dev-myDummyProject-statemachine",
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "lambda:InvokeFunction"
                          ],
                          "Resource": [
                            {
                              "Fn::GetAtt": [
                                "hello",
                                "Arn"
                              ]
                            },
                            {
                              "Fn::Sub": [
                                "${functionArn}:*",
                                {
                                  "functionArn": {
                                    "Fn::GetAtt": [
                                      "hello",
                                      "Arn"
                                    ]
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "DdbtablestepfuncStepFunctionsStateMachineRole": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": {
                          "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                        }
                      },
                      "Action": "sts:AssumeRole"
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": "dev-myDummyProject-statemachine",
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "dynamodb:UpdateItem"
                          ],
                          "Resource": [
                            {
                              "Fn::Join": [
                                ":",
                                [
                                  "arn",
                                  {
                                    "Ref": "AWS::Partition"
                                  },
                                  "dynamodb",
                                  {
                                    "Ref": "AWS::Region"
                                  },
                                  {
                                    "Ref": "AWS::AccountId"
                                  },
                                  {
                                    "Fn::Join": [
                                      "/",
                                      [
                                        "table",
                                        {
                                          "Fn::ImportValue": "MyExternalStack:ToDoTable:Name"
                                        }
                                      ]
                                    ]
                                  }
                                ]
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "MyStateMachine": {
              "Type": "AWS::StepFunctions::StateMachine",
              "Properties": {
                "DefinitionString": {
                  "Fn::Sub": [
                    "{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld1\",\n  \"States\": {\n    \"HelloWorld1\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${d9c520373cb4d5c2b85bd6ec0e3422d7}\",\n      \"End\": true\n    }\n  }\n}",
                    {
                      "d9c520373cb4d5c2b85bd6ec0e3422d7": {
                        "Fn::GetAtt": [
                          "hello",
                          "Arn"
                        ]
                      }
                    }
                  ]
                },
                "RoleArn": {
                  "Fn::GetAtt": [
                    "MyStateMachineRole",
                    "Arn"
                  ]
                },
                "Tags": [
                  {
                    "Key": "Team",
                    "Value": "LamLuong"
                  }
                ],
                "StateMachineName": "myStateMachine"
              },
              "DependsOn": [
                "MyStateMachineRole",
                "CustomIamRole"
              ]
            },
            "Hellostepfunc2StepFunctionsStateMachine": {
              "Type": "AWS::StepFunctions::StateMachine",
              "Properties": {
                "DefinitionString": {
                  "Fn::Sub": [
                    "{\n  \"StartAt\": \"HelloWorld2\",\n  \"States\": {\n    \"HelloWorld2\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${d9c520373cb4d5c2b85bd6ec0e3422d7}\",\n      \"End\": true\n    }\n  }\n}",
                    {
                      "d9c520373cb4d5c2b85bd6ec0e3422d7": {
                        "Fn::GetAtt": [
                          "hello",
                          "Arn"
                        ]
                      }
                    }
                  ]
                },
                "RoleArn": {
                  "Fn::GetAtt": [
                    "Hellostepfunc2StepFunctionsStateMachineRole",
                    "Arn"
                  ]
                }
              },
              "DependsOn": [
                "Hellostepfunc2StepFunctionsStateMachineRole"
              ]
            },
            "DdbtablestepfuncStepFunctionsStateMachine": {
              "Type": "AWS::StepFunctions::StateMachine",
              "Properties": {
                "DefinitionString": {
                  "Fn::Sub": [
                    "{\n  \"Comment\": \"Demonstrates how to reference a DynamoDB Table Name exported from an external CloudFormation Stack\",\n  \"StartAt\": \"ImportDDBTableName\",\n  \"States\": {\n    \"ImportDDBTableName\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::dynamodb:updateItem\",\n      \"Parameters\": {\n        \"TableName\": \"${40f440eae28bd82cdfea658066f2801b}\",\n        \"Key\": {\n          \"id\": {\n            \"S.$\": \"$.todoId\"\n          }\n        },\n        \"UpdateExpression\": \"SET #status = :updatedStatus\",\n        \"ExpressionAttributeNames\": {\n          \"#status\": \"status\"\n        },\n        \"ExpressionAttributeValues\": {\n          \":updatedStatus\": {\n            \"S\": \"DONE\"\n          }\n        }\n      },\n      \"End\": true\n    }\n  }\n}",
                    {
                      "40f440eae28bd82cdfea658066f2801b": {
                        "Fn::ImportValue": "MyExternalStack:ToDoTable:Name"
                      }
                    }
                  ]
                },
                "RoleArn": {
                  "Fn::GetAtt": [
                    "DdbtablestepfuncStepFunctionsStateMachineRole",
                    "Arn"
                  ]
                },
                "Tags": [
                  {
                    "Key": "Team",
                    "Value": "Atlantis"
                  }
                ]
              },
              "DependsOn": [
                "DdbtablestepfuncStepFunctionsStateMachineRole",
                "DynamoDBTable",
                "KinesisStream",
                "CustomIamRole"
              ]
            },
            "MyTaskStepFunctionsActivity": {
              "Type": "AWS::StepFunctions::Activity",
              "Properties": {
                "Name": "myTask"
              }
            },
            "YourTaskStepFunctionsActivity": {
              "Type": "AWS::StepFunctions::Activity",
              "Properties": {
                "Name": "yourTask"
              }
            },
            "MyStateMachineExecutionsTimedOutAlarm": {
              "Type": "AWS::CloudWatch::Alarm",
              "Properties": {
                "Namespace": "AWS/States",
                "MetricName": "ExecutionsTimedOut",
                "AlarmDescription": "myStateMachine[dev][us-east-1]: executions timed out",
                "Threshold": 1,
                "Period": 60,
                "EvaluationPeriods": 1,
                "ComparisonOperator": "GreaterThanOrEqualToThreshold",
                "Statistic": "Sum",
                "OKActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "AlarmActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "InsufficientDataActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "TreatMissingData": "ignore",
                "Dimensions": [
                  {
                    "Name": "StateMachineArn",
                    "Value": {
                      "Ref": "MyStateMachine"
                    }
                  }
                ]
              }
            },
            "MyStateMachineExecutionsFailedAlarm": {
              "Type": "AWS::CloudWatch::Alarm",
              "Properties": {
                "Namespace": "AWS/States",
                "MetricName": "ExecutionsFailed",
                "AlarmDescription": "myStateMachine[dev][us-east-1]: executions failed",
                "Threshold": 1,
                "Period": 60,
                "EvaluationPeriods": 1,
                "ComparisonOperator": "GreaterThanOrEqualToThreshold",
                "Statistic": "Sum",
                "OKActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "AlarmActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "InsufficientDataActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "TreatMissingData": "ignore",
                "Dimensions": [
                  {
                    "Name": "StateMachineArn",
                    "Value": {
                      "Ref": "MyStateMachine"
                    }
                  }
                ]
              }
            },
            "MyStateMachineExecutionsAbortedAlarm": {
              "Type": "AWS::CloudWatch::Alarm",
              "Properties": {
                "Namespace": "AWS/States",
                "MetricName": "ExecutionsAborted",
                "AlarmDescription": "myStateMachine[dev][us-east-1]: executions were aborted",
                "Threshold": 1,
                "Period": 60,
                "EvaluationPeriods": 1,
                "ComparisonOperator": "GreaterThanOrEqualToThreshold",
                "Statistic": "Sum",
                "OKActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "AlarmActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "InsufficientDataActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "TreatMissingData": "ignore",
                "Dimensions": [
                  {
                    "Name": "StateMachineArn",
                    "Value": {
                      "Ref": "MyStateMachine"
                    }
                  }
                ]
              }
            },
            "MyStateMachineExecutionThrottledAlarm": {
              "Type": "AWS::CloudWatch::Alarm",
              "Properties": {
                "Namespace": "AWS/States",
                "MetricName": "ExecutionThrottled",
                "AlarmDescription": "myStateMachine[dev][us-east-1]: execution were throttled",
                "Threshold": 1,
                "Period": 60,
                "EvaluationPeriods": 1,
                "ComparisonOperator": "GreaterThanOrEqualToThreshold",
                "Statistic": "Sum",
                "OKActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "AlarmActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "InsufficientDataActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "TreatMissingData": "breaching",
                "Dimensions": [
                  {
                    "Name": "StateMachineArn",
                    "Value": {
                      "Ref": "MyStateMachine"
                    }
                  }
                ]
              }
            },
            "MyStateMachineExecutionsSucceededAlarm": {
              "Type": "AWS::CloudWatch::Alarm",
              "Properties": {
                "Namespace": "AWS/States",
                "MetricName": "ExecutionsSucceeded",
                "AlarmDescription": "myStateMachine[dev][us-east-1]: executions succeeded",
                "Threshold": 1,
                "Period": 60,
                "EvaluationPeriods": 1,
                "ComparisonOperator": "GreaterThanOrEqualToThreshold",
                "Statistic": "Sum",
                "OKActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "AlarmActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "InsufficientDataActions": [
                  "arn:aws:sns:us-east-1:1234567890:NotifyMe"
                ],
                "TreatMissingData": "ignore",
                "Dimensions": [
                  {
                    "Name": "StateMachineArn",
                    "Value": {
                      "Ref": "MyStateMachine"
                    }
                  }
                ]
              }
            },
            "TestStepFunctionStepFunctionsEventsRuleSchedule1": {
              "Type": "AWS::Events::Rule",
              "Properties": {
                "ScheduleExpression": "rate(10 minutes)",
                "State": "ENABLED",
                "Targets": [
                  {
                    "Input": "{\"key1\":\"value1\",\"key2\":\"value2\",\"stageParams\":{\"stage\":\"dev\"}}",
                    "Arn": {
                      "Ref": "MyStateMachine"
                    },
                    "Id": "testStepFunctionStepFunctionsSchedule",
                    "RoleArn": {
                      "Fn::GetAtt": [
                        "TestStepFunctionScheduleToStepFunctionsRole",
                        "Arn"
                      ]
                    }
                  }
                ]
              }
            },
            "TestStepFunctionScheduleToStepFunctionsRole": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": "events.amazonaws.com"
                      },
                      "Action": "sts:AssumeRole"
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": "dev-us-east-1-myDummyProject-testStepFunction-schedule",
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "states:StartExecution"
                          ],
                          "Resource": {
                            "Ref": "MyStateMachine"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "ApiGatewayRestApi": {
              "Type": "AWS::ApiGateway::RestApi",
              "Properties": {
                "Name": "dev-myDummyProject",
                "EndpointConfiguration": {
                  "Types": [
                    "EDGE"
                  ]
                }
              }
            },
            "ApiGatewayResourceGofunction": {
              "Type": "AWS::ApiGateway::Resource",
              "Properties": {
                "ParentId": {
                  "Fn::GetAtt": [
                    "ApiGatewayRestApi",
                    "RootResourceId"
                  ]
                },
                "PathPart": "gofunction",
                "RestApiId": {
                  "Ref": "ApiGatewayRestApi"
                }
              }
            },
            "ApiGatewayMethodGofunctionGet": {
              "Type": "AWS::ApiGateway::Method",
              "Properties": {
                "HttpMethod": "GET",
                "RequestParameters": {},
                "AuthorizationType": "NONE",
                "ApiKeyRequired": "<REDACTED>",
                "ResourceId": {
                  "Ref": "ApiGatewayResourceGofunction"
                },
                "RestApiId": {
                  "Ref": "ApiGatewayRestApi"
                },
                "Integration": {
                  "IntegrationHttpMethod": "POST",
                  "Type": "AWS",
                  "Credentials": "<REDACTED>",
                  "Uri": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":apigateway:",
                        {
                          "Ref": "AWS::Region"
                        },
                        ":states:action/StartExecution"
                      ]
                    ]
                  },
                  "PassthroughBehavior": "NEVER",
                  "RequestTemplates": {
                    "application/json": {
                      "Fn::Sub": [
                        "\n#set( $body = $util.escapeJavaScript($input.json('$')).replaceAll(\"\\\\'\", \"'\") )\n{\"input\": \"$body\", \"name\": \"$context.requestId\", \"stateMachineArn\":\"${StateMachineArn}\"}",
                        {
                          "StateMachineArn": {
                            "Ref": "MyStateMachine"
                          }
                        }
                      ]
                    },
                    "application/x-www-form-urlencoded": {
                      "Fn::Sub": [
                        "\n#set( $body = $util.escapeJavaScript($input.json('$')).replaceAll(\"\\\\'\", \"'\") )\n{\"input\": \"$body\", \"name\": \"$context.requestId\", \"stateMachineArn\":\"${StateMachineArn}\"}",
                        {
                          "StateMachineArn": {
                            "Ref": "MyStateMachine"
                          }
                        }
                      ]
                    }
                  },
                  "IntegrationResponses": [
                    {
                      "StatusCode": 200,
                      "SelectionPattern": 200,
                      "ResponseParameters": {},
                      "ResponseTemplates": {}
                    },
                    {
                      "StatusCode": 400,
                      "SelectionPattern": 400,
                      "ResponseParameters": {},
                      "ResponseTemplates": {}
                    }
                  ]
                },
                "MethodResponses": [
                  {
                    "ResponseParameters": {},
                    "ResponseModels": {},
                    "StatusCode": 200
                  },
                  {
                    "ResponseParameters": {},
                    "ResponseModels": {},
                    "StatusCode": 400
                  }
                ]
              }
            },
            "ApigatewayToStepFunctionsRole": {
              "Type": "AWS::IAM::Role",
              "Properties": {
                "AssumeRolePolicyDocument": {
                  "Version": "2012-10-17",
                  "Statement": [
                    {
                      "Effect": "Allow",
                      "Principal": {
                        "Service": "apigateway.amazonaws.com"
                      },
                      "Action": "sts:AssumeRole"
                    }
                  ]
                },
                "Policies": [
                  {
                    "PolicyName": "apigatewaytostepfunctions",
                    "PolicyDocument": {
                      "Version": "2012-10-17",
                      "Statement": [
                        {
                          "Effect": "Allow",
                          "Action": [
                            "states:StartExecution"
                          ],
                          "Resource": "*"
                        }
                      ]
                    }
                  }
                ]
              }
            },
            "ApiGatewayDeployment1763434522854": {
              "Type": "AWS::ApiGateway::Deployment",
              "Properties": {
                "RestApiId": {
                  "Ref": "ApiGatewayRestApi"
                },
                "StageName": "dev"
              },
              "DependsOn": [
                "ApiGatewayMethodGofunctionGet"
              ]
            }
          },
          "Outputs": {
            "ServerlessDeploymentBucketName": {
              "Value": "serverless-framework-deployments-us-east-1-e50dbcdd-e8ba",
              "Export": {
                "Name": "sls-myDummyProject-dev-ServerlessDeploymentBucketName"
              }
            },
            "MyTestFunctionLambdaFunctionQualifiedArn": {
              "Description": "Current Lambda function version",
              "Value": {
                "Ref": "MyTestFunctionLambdaVersionwhf0isdNfUr0yAGfiRJ0SbPVJm6zBRSBm3qZRQ2KlZQ"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-MyTestFunctionLambdaFunctionQualifiedArn"
              }
            },
            "MyStateMachineArn": {
              "Description": "Current StateMachine Arn",
              "Value": {
                "Ref": "MyStateMachine"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-MyStateMachineArn"
              }
            },
            "Hellostepfunc2StepFunctionsStateMachineArn": {
              "Description": "Current StateMachine Arn",
              "Value": {
                "Ref": "Hellostepfunc2StepFunctionsStateMachine"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-Hellostepfunc2StepFunctionsStateMachineArn"
              }
            },
            "DdbtablestepfuncStepFunctionsStateMachineArn": {
              "Description": "Current StateMachine Arn",
              "Value": {
                "Ref": "DdbtablestepfuncStepFunctionsStateMachine"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-DdbtablestepfuncStepFunctionsStateMachineArn"
              }
            },
            "MyTaskStepFunctionsActivityArn": {
              "Description": "Current StateMachine Arn",
              "Value": {
                "Ref": "MyTaskStepFunctionsActivity"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-MyTaskStepFunctionsActivityArn"
              }
            },
            "YourTaskStepFunctionsActivityArn": {
              "Description": "Current StateMachine Arn",
              "Value": {
                "Ref": "YourTaskStepFunctionsActivity"
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-YourTaskStepFunctionsActivityArn"
              }
            },
            "ServiceEndpoint": {
              "Description": "URL of the service endpoint",
              "Value": {
                "Fn::Join": [
                  "",
                  [
                    "https://",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    ".execute-api.",
                    {
                      "Ref": "AWS::Region"
                    },
                    ".",
                    {
                      "Ref": "AWS::URLSuffix"
                    },
                    "/dev"
                  ]
                ]
              },
              "Export": {
                "Name": "sls-myDummyProject-dev-ServiceEndpoint"
              }
            }
          }
        },
        "vpc": {}
      },
      "functions": {
        "myTestFunction": {
          "handler": "handler.myTestFunction",
          "events": [],
          "name": "myDummyProject-dev-myTestFunction",
          "package": {},
          "memory": 1024,
          "timeout": 6,
          "runtime": "python3.12",
          "vpc": {},
          "versionLogicalId": "MyTestFunctionLambdaVersionwhf0isdNfUr0yAGfiRJ0SbPVJm6zBRSBm3qZRQ2KlZQ"
        }
      },
      "stepFunctions": {
        "stateMachines": {
          "testStepFunction": {
            "events": [
              {
                "http": {
                  "path": "gofunction",
                  "method": "get"
                }
              },
              {
                "schedule": {
                  "rate": "rate(10 minutes)",
                  "enabled": true,
                  "input": {
                    "key1": "value1",
                    "key2": "value2",
                    "stageParams": {
                      "stage": "dev"
                    }
                  }
                }
              }
            ],
            "name": "myStateMachine",
            "definition": {
              "Comment": "A Hello World example of the Amazon States Language using an AWS Lambda Function",
              "StartAt": "HelloWorld1",
              "States": {
                "HelloWorld1": {
                  "Type": "Task",
                  "Resource": "${d9c520373cb4d5c2b85bd6ec0e3422d7}",
                  "End": true
                }
              }
            },
            "dependsOn": "CustomIamRole",
            "tags": {
              "Team": "LamLuong"
            },
            "alarms": {
              "topics": {
                "ok": "arn:aws:sns:us-east-1:1234567890:NotifyMe",
                "alarm": "arn:aws:sns:us-east-1:1234567890:NotifyMe",
                "insufficientData": "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              },
              "metrics": [
                "executionsTimedOut",
                "executionsFailed",
                "executionsAborted",
                {
                  "metric": "executionThrottled",
                  "treatMissingData": "breaching"
                },
                "executionsSucceeded"
              ],
              "treatMissingData": "ignore"
            }
          },
          "hellostepfunc2": {
            "definition": {
              "StartAt": "HelloWorld2",
              "States": {
                "HelloWorld2": {
                  "Type": "Task",
                  "Resource": "${d9c520373cb4d5c2b85bd6ec0e3422d7}",
                  "End": true
                }
              }
            }
          },
          "ddbtablestepfunc": {
            "definition": {
              "Comment": "Demonstrates how to reference a DynamoDB Table Name exported from an external CloudFormation Stack",
              "StartAt": "ImportDDBTableName",
              "States": {
                "ImportDDBTableName": {
                  "Type": "Task",
                  "Resource": "arn:aws:states:::dynamodb:updateItem",
                  "Parameters": {
                    "TableName": "${40f440eae28bd82cdfea658066f2801b}",
                    "Key": {
                      "id": {
                        "S.$": "$.todoId"
                      }
                    },
                    "UpdateExpression": "SET #status = :updatedStatus",
                    "ExpressionAttributeNames": {
                      "#status": "status"
                    },
                    "ExpressionAttributeValues": {
                      ":updatedStatus": {
                        "S": "DONE"
                      }
                    }
                  },
                  "End": true
                }
              }
            },
            "dependsOn": [
              "DynamoDBTable",
              "KinesisStream",
              "CustomIamRole"
            ],
            "tags": {
              "Team": "Atlantis"
            }
          }
        },
        "activities": [
          "myTask",
          "yourTask"
        ],
        "validate": true
      }
    },
    "provider": {
      "name": "aws",
      "runtime": "python3.12",
      "stage": "dev",
      "region": "us-east-1",
      "versionFunctions": true,
      "compiledCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "MyTestFunctionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/myDummyProject-dev-myTestFunction"
            }
          },
          "IamRoleLambdaExecution": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": [
                        "lambda.amazonaws.com"
                      ]
                    },
                    "Action": [
                      "sts:AssumeRole"
                    ]
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": {
                    "Fn::Join": [
                      "-",
                      [
                        "myDummyProject",
                        "dev",
                        "lambda"
                      ]
                    ]
                  },
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:CreateLogStream",
                          "logs:CreateLogGroup",
                          "logs:TagResource"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/myDummyProject-dev*:*"
                          }
                        ]
                      },
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:PutLogEvents"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/myDummyProject-dev*:*:*"
                          }
                        ]
                      }
                    ]
                  }
                }
              ],
              "Path": "/",
              "RoleName": {
                "Fn::Join": [
                  "-",
                  [
                    "myDummyProject",
                    "dev",
                    {
                      "Ref": "AWS::Region"
                    },
                    "lambdaRole"
                  ]
                ]
              }
            }
          },
          "MyTestFunctionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": "serverless-framework-deployments-us-east-1-e50dbcdd-e8ba",
                "S3Key": "serverless/myDummyProject/dev/1763434535298-2025-11-18T02:55:35.298Z/myDummyProject.zip"
              },
              "Handler": "handler.myTestFunction",
              "Runtime": "python3.12",
              "FunctionName": "myDummyProject-dev-myTestFunction",
              "MemorySize": 1024,
              "Timeout": 6,
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "MyTestFunctionLogGroup"
            ]
          },
          "MyTestFunctionLambdaVersionwhf0isdNfUr0yAGfiRJ0SbPVJm6zBRSBm3qZRQ2KlZQ": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "MyTestFunctionLambdaFunction"
              },
              "CodeSha256": "l51RiBB0rTilONjan+MaU8LepSXkl+WwgweSJT1y72E="
            }
          },
          "MyStateMachineRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": {
                        "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                      }
                    },
                    "Action": "sts:AssumeRole"
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": "dev-myDummyProject-statemachine",
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "lambda:InvokeFunction"
                        ],
                        "Resource": [
                          {
                            "Fn::GetAtt": [
                              "hello",
                              "Arn"
                            ]
                          },
                          {
                            "Fn::Sub": [
                              "${functionArn}:*",
                              {
                                "functionArn": {
                                  "Fn::GetAtt": [
                                    "hello",
                                    "Arn"
                                  ]
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                }
              ]
            }
          },
          "Hellostepfunc2StepFunctionsStateMachineRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": {
                        "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                      }
                    },
                    "Action": "sts:AssumeRole"
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": "dev-myDummyProject-statemachine",
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "lambda:InvokeFunction"
                        ],
                        "Resource": [
                          {
                            "Fn::GetAtt": [
                              "hello",
                              "Arn"
                            ]
                          },
                          {
                            "Fn::Sub": [
                              "${functionArn}:*",
                              {
                                "functionArn": {
                                  "Fn::GetAtt": [
                                    "hello",
                                    "Arn"
                                  ]
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                }
              ]
            }
          },
          "DdbtablestepfuncStepFunctionsStateMachineRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": {
                        "Fn::Sub": "states.${AWS::Region}.amazonaws.com"
                      }
                    },
                    "Action": "sts:AssumeRole"
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": "dev-myDummyProject-statemachine",
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "dynamodb:UpdateItem"
                        ],
                        "Resource": [
                          {
                            "Fn::Join": [
                              ":",
                              [
                                "arn",
                                {
                                  "Ref": "AWS::Partition"
                                },
                                "dynamodb",
                                {
                                  "Ref": "AWS::Region"
                                },
                                {
                                  "Ref": "AWS::AccountId"
                                },
                                {
                                  "Fn::Join": [
                                    "/",
                                    [
                                      "table",
                                      {
                                        "Fn::ImportValue": "MyExternalStack:ToDoTable:Name"
                                      }
                                    ]
                                  ]
                                }
                              ]
                            ]
                          }
                        ]
                      }
                    ]
                  }
                }
              ]
            }
          },
          "MyStateMachine": {
            "Type": "AWS::StepFunctions::StateMachine",
            "Properties": {
              "DefinitionString": {
                "Fn::Sub": [
                  "{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld1\",\n  \"States\": {\n    \"HelloWorld1\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${d9c520373cb4d5c2b85bd6ec0e3422d7}\",\n      \"End\": true\n    }\n  }\n}",
                  {
                    "d9c520373cb4d5c2b85bd6ec0e3422d7": {
                      "Fn::GetAtt": [
                        "hello",
                        "Arn"
                      ]
                    }
                  }
                ]
              },
              "RoleArn": {
                "Fn::GetAtt": [
                  "MyStateMachineRole",
                  "Arn"
                ]
              },
              "Tags": [
                {
                  "Key": "Team",
                  "Value": "LamLuong"
                }
              ],
              "StateMachineName": "myStateMachine"
            },
            "DependsOn": [
              "MyStateMachineRole",
              "CustomIamRole"
            ]
          },
          "Hellostepfunc2StepFunctionsStateMachine": {
            "Type": "AWS::StepFunctions::StateMachine",
            "Properties": {
              "DefinitionString": {
                "Fn::Sub": [
                  "{\n  \"StartAt\": \"HelloWorld2\",\n  \"States\": {\n    \"HelloWorld2\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${d9c520373cb4d5c2b85bd6ec0e3422d7}\",\n      \"End\": true\n    }\n  }\n}",
                  {
                    "d9c520373cb4d5c2b85bd6ec0e3422d7": {
                      "Fn::GetAtt": [
                        "hello",
                        "Arn"
                      ]
                    }
                  }
                ]
              },
              "RoleArn": {
                "Fn::GetAtt": [
                  "Hellostepfunc2StepFunctionsStateMachineRole",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "Hellostepfunc2StepFunctionsStateMachineRole"
            ]
          },
          "DdbtablestepfuncStepFunctionsStateMachine": {
            "Type": "AWS::StepFunctions::StateMachine",
            "Properties": {
              "DefinitionString": {
                "Fn::Sub": [
                  "{\n  \"Comment\": \"Demonstrates how to reference a DynamoDB Table Name exported from an external CloudFormation Stack\",\n  \"StartAt\": \"ImportDDBTableName\",\n  \"States\": {\n    \"ImportDDBTableName\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:states:::dynamodb:updateItem\",\n      \"Parameters\": {\n        \"TableName\": \"${40f440eae28bd82cdfea658066f2801b}\",\n        \"Key\": {\n          \"id\": {\n            \"S.$\": \"$.todoId\"\n          }\n        },\n        \"UpdateExpression\": \"SET #status = :updatedStatus\",\n        \"ExpressionAttributeNames\": {\n          \"#status\": \"status\"\n        },\n        \"ExpressionAttributeValues\": {\n          \":updatedStatus\": {\n            \"S\": \"DONE\"\n          }\n        }\n      },\n      \"End\": true\n    }\n  }\n}",
                  {
                    "40f440eae28bd82cdfea658066f2801b": {
                      "Fn::ImportValue": "MyExternalStack:ToDoTable:Name"
                    }
                  }
                ]
              },
              "RoleArn": {
                "Fn::GetAtt": [
                  "DdbtablestepfuncStepFunctionsStateMachineRole",
                  "Arn"
                ]
              },
              "Tags": [
                {
                  "Key": "Team",
                  "Value": "Atlantis"
                }
              ]
            },
            "DependsOn": [
              "DdbtablestepfuncStepFunctionsStateMachineRole",
              "DynamoDBTable",
              "KinesisStream",
              "CustomIamRole"
            ]
          },
          "MyTaskStepFunctionsActivity": {
            "Type": "AWS::StepFunctions::Activity",
            "Properties": {
              "Name": "myTask"
            }
          },
          "YourTaskStepFunctionsActivity": {
            "Type": "AWS::StepFunctions::Activity",
            "Properties": {
              "Name": "yourTask"
            }
          },
          "MyStateMachineExecutionsTimedOutAlarm": {
            "Type": "AWS::CloudWatch::Alarm",
            "Properties": {
              "Namespace": "AWS/States",
              "MetricName": "ExecutionsTimedOut",
              "AlarmDescription": "myStateMachine[dev][us-east-1]: executions timed out",
              "Threshold": 1,
              "Period": 60,
              "EvaluationPeriods": 1,
              "ComparisonOperator": "GreaterThanOrEqualToThreshold",
              "Statistic": "Sum",
              "OKActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "AlarmActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "InsufficientDataActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "TreatMissingData": "ignore",
              "Dimensions": [
                {
                  "Name": "StateMachineArn",
                  "Value": {
                    "Ref": "MyStateMachine"
                  }
                }
              ]
            }
          },
          "MyStateMachineExecutionsFailedAlarm": {
            "Type": "AWS::CloudWatch::Alarm",
            "Properties": {
              "Namespace": "AWS/States",
              "MetricName": "ExecutionsFailed",
              "AlarmDescription": "myStateMachine[dev][us-east-1]: executions failed",
              "Threshold": 1,
              "Period": 60,
              "EvaluationPeriods": 1,
              "ComparisonOperator": "GreaterThanOrEqualToThreshold",
              "Statistic": "Sum",
              "OKActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "AlarmActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "InsufficientDataActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "TreatMissingData": "ignore",
              "Dimensions": [
                {
                  "Name": "StateMachineArn",
                  "Value": {
                    "Ref": "MyStateMachine"
                  }
                }
              ]
            }
          },
          "MyStateMachineExecutionsAbortedAlarm": {
            "Type": "AWS::CloudWatch::Alarm",
            "Properties": {
              "Namespace": "AWS/States",
              "MetricName": "ExecutionsAborted",
              "AlarmDescription": "myStateMachine[dev][us-east-1]: executions were aborted",
              "Threshold": 1,
              "Period": 60,
              "EvaluationPeriods": 1,
              "ComparisonOperator": "GreaterThanOrEqualToThreshold",
              "Statistic": "Sum",
              "OKActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "AlarmActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "InsufficientDataActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "TreatMissingData": "ignore",
              "Dimensions": [
                {
                  "Name": "StateMachineArn",
                  "Value": {
                    "Ref": "MyStateMachine"
                  }
                }
              ]
            }
          },
          "MyStateMachineExecutionThrottledAlarm": {
            "Type": "AWS::CloudWatch::Alarm",
            "Properties": {
              "Namespace": "AWS/States",
              "MetricName": "ExecutionThrottled",
              "AlarmDescription": "myStateMachine[dev][us-east-1]: execution were throttled",
              "Threshold": 1,
              "Period": 60,
              "EvaluationPeriods": 1,
              "ComparisonOperator": "GreaterThanOrEqualToThreshold",
              "Statistic": "Sum",
              "OKActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "AlarmActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "InsufficientDataActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "TreatMissingData": "breaching",
              "Dimensions": [
                {
                  "Name": "StateMachineArn",
                  "Value": {
                    "Ref": "MyStateMachine"
                  }
                }
              ]
            }
          },
          "MyStateMachineExecutionsSucceededAlarm": {
            "Type": "AWS::CloudWatch::Alarm",
            "Properties": {
              "Namespace": "AWS/States",
              "MetricName": "ExecutionsSucceeded",
              "AlarmDescription": "myStateMachine[dev][us-east-1]: executions succeeded",
              "Threshold": 1,
              "Period": 60,
              "EvaluationPeriods": 1,
              "ComparisonOperator": "GreaterThanOrEqualToThreshold",
              "Statistic": "Sum",
              "OKActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "AlarmActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "InsufficientDataActions": [
                "arn:aws:sns:us-east-1:1234567890:NotifyMe"
              ],
              "TreatMissingData": "ignore",
              "Dimensions": [
                {
                  "Name": "StateMachineArn",
                  "Value": {
                    "Ref": "MyStateMachine"
                  }
                }
              ]
            }
          },
          "TestStepFunctionStepFunctionsEventsRuleSchedule1": {
            "Type": "AWS::Events::Rule",
            "Properties": {
              "ScheduleExpression": "rate(10 minutes)",
              "State": "ENABLED",
              "Targets": [
                {
                  "Input": "{\"key1\":\"value1\",\"key2\":\"value2\",\"stageParams\":{\"stage\":\"dev\"}}",
                  "Arn": {
                    "Ref": "MyStateMachine"
                  },
                  "Id": "testStepFunctionStepFunctionsSchedule",
                  "RoleArn": {
                    "Fn::GetAtt": [
                      "TestStepFunctionScheduleToStepFunctionsRole",
                      "Arn"
                    ]
                  }
                }
              ]
            }
          },
          "TestStepFunctionScheduleToStepFunctionsRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": "events.amazonaws.com"
                    },
                    "Action": "sts:AssumeRole"
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": "dev-us-east-1-myDummyProject-testStepFunction-schedule",
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "states:StartExecution"
                        ],
                        "Resource": {
                          "Ref": "MyStateMachine"
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          "ApiGatewayRestApi": {
            "Type": "AWS::ApiGateway::RestApi",
            "Properties": {
              "Name": "dev-myDummyProject",
              "EndpointConfiguration": {
                "Types": [
                  "EDGE"
                ]
              }
            }
          },
          "ApiGatewayResourceGofunction": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Fn::GetAtt": [
                  "ApiGatewayRestApi",
                  "RootResourceId"
                ]
              },
              "PathPart": "gofunction",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodGofunctionGet": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "GET",
              "RequestParameters": {},
              "AuthorizationType": "NONE",
              "ApiKeyRequired": "<REDACTED>",
              "ResourceId": {
                "Ref": "ApiGatewayResourceGofunction"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS",
                "Credentials": "<REDACTED>",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":states:action/StartExecution"
                    ]
                  ]
                },
                "PassthroughBehavior": "NEVER",
                "RequestTemplates": {
                  "application/json": {
                    "Fn::Sub": [
                      "\n#set( $body = $util.escapeJavaScript($input.json('$')).replaceAll(\"\\\\'\", \"'\") )\n{\"input\": \"$body\", \"name\": \"$context.requestId\", \"stateMachineArn\":\"${StateMachineArn}\"}",
                      {
                        "StateMachineArn": {
                          "Ref": "MyStateMachine"
                        }
                      }
                    ]
                  },
                  "application/x-www-form-urlencoded": {
                    "Fn::Sub": [
                      "\n#set( $body = $util.escapeJavaScript($input.json('$')).replaceAll(\"\\\\'\", \"'\") )\n{\"input\": \"$body\", \"name\": \"$context.requestId\", \"stateMachineArn\":\"${StateMachineArn}\"}",
                      {
                        "StateMachineArn": {
                          "Ref": "MyStateMachine"
                        }
                      }
                    ]
                  }
                },
                "IntegrationResponses": [
                  {
                    "StatusCode": 200,
                    "SelectionPattern": 200,
                    "ResponseParameters": {},
                    "ResponseTemplates": {}
                  },
                  {
                    "StatusCode": 400,
                    "SelectionPattern": 400,
                    "ResponseParameters": {},
                    "ResponseTemplates": {}
                  }
                ]
              },
              "MethodResponses": [
                {
                  "ResponseParameters": {},
                  "ResponseModels": {},
                  "StatusCode": 200
                },
                {
                  "ResponseParameters": {},
                  "ResponseModels": {},
                  "StatusCode": 400
                }
              ]
            }
          },
          "ApigatewayToStepFunctionsRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": "apigateway.amazonaws.com"
                    },
                    "Action": "sts:AssumeRole"
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": "apigatewaytostepfunctions",
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "states:StartExecution"
                        ],
                        "Resource": "*"
                      }
                    ]
                  }
                }
              ]
            }
          },
          "ApiGatewayDeployment1763434522854": {
            "Type": "AWS::ApiGateway::Deployment",
            "Properties": {
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "StageName": "dev"
            },
            "DependsOn": [
              "ApiGatewayMethodGofunctionGet"
            ]
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": "serverless-framework-deployments-us-east-1-e50dbcdd-e8ba",
            "Export": {
              "Name": "sls-myDummyProject-dev-ServerlessDeploymentBucketName"
            }
          },
          "MyTestFunctionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "MyTestFunctionLambdaVersionwhf0isdNfUr0yAGfiRJ0SbPVJm6zBRSBm3qZRQ2KlZQ"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-MyTestFunctionLambdaFunctionQualifiedArn"
            }
          },
          "MyStateMachineArn": {
            "Description": "Current StateMachine Arn",
            "Value": {
              "Ref": "MyStateMachine"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-MyStateMachineArn"
            }
          },
          "Hellostepfunc2StepFunctionsStateMachineArn": {
            "Description": "Current StateMachine Arn",
            "Value": {
              "Ref": "Hellostepfunc2StepFunctionsStateMachine"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-Hellostepfunc2StepFunctionsStateMachineArn"
            }
          },
          "DdbtablestepfuncStepFunctionsStateMachineArn": {
            "Description": "Current StateMachine Arn",
            "Value": {
              "Ref": "DdbtablestepfuncStepFunctionsStateMachine"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-DdbtablestepfuncStepFunctionsStateMachineArn"
            }
          },
          "MyTaskStepFunctionsActivityArn": {
            "Description": "Current StateMachine Arn",
            "Value": {
              "Ref": "MyTaskStepFunctionsActivity"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-MyTaskStepFunctionsActivityArn"
            }
          },
          "YourTaskStepFunctionsActivityArn": {
            "Description": "Current StateMachine Arn",
            "Value": {
              "Ref": "YourTaskStepFunctionsActivity"
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-YourTaskStepFunctionsActivityArn"
            }
          },
          "ServiceEndpoint": {
            "Description": "URL of the service endpoint",
            "Value": {
              "Fn::Join": [
                "",
                [
                  "https://",
                  {
                    "Ref": "ApiGatewayRestApi"
                  },
                  ".execute-api.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/dev"
                ]
              ]
            },
            "Export": {
              "Name": "sls-myDummyProject-dev-ServiceEndpoint"
            }
          }
        }
      },
      "vpc": {}
    },
    "dashboard": {
      "isEnabledForService": false,
      "requiredAuthentication": false,
      "orgFeaturesInUse": null,
      "orgObservabilityIntegrations": null,
      "serviceAppId": null,
      "serviceProvider": null,
      "instanceParameters": null
    },
    "error": {
      "message": "The CloudFormation template is invalid: Template error: instance of Fn::GetAtt references undefined resource hello",
      "stack": "ServerlessError2: The CloudFormation template is invalid: Template error: instance of Fn::GetAtt references undefined resource hello\n    at file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1073:21610\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async aws:deploy:deploy:validateTemplate (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1084:7698)\n    at async PluginManager.runHooks (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:11085)\n    at async PluginManager.invoke (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:11854)\n    at async PluginManager.spawn (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:12213)\n    at async PluginManager.runHooks (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:11085)\n    at async PluginManager.invoke (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:11854)\n    at async PluginManager.run (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1326:12584)\n    at async Serverless.run (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1333:10499)\n    at async runFramework (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1360:1777)\n    at async TraditionalRunner.run (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1356:28406)\n    at async route (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1531:2878)\n    at async Object.run (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1532:3845)\n    at async run2 (file:///Users/lamluong/.serverless/releases/4.23.0/package/dist/sf-core.js:1532:4999)",
      "code": "INVALID_AWS_CLOUDFORMATION_TEMPLATE"
    },
    "serviceRawFile": "service: myDummyProject\nplugins:\n  - serverless-step-functions\n  - serverless-pseudo-parameters\n\nprovider:\n  name: aws\n  runtime: python3.12\n\nfunctions:\n  myTestFunction:\n    handler: handler.myTestFunction\n\nstepFunctions:\n  stateMachines:\n    testStepFunction:\n      events:\n        - http:\n            path: gofunction\n            method: GET\n        - schedule:\n            rate: rate(10 minutes)\n            enabled: true\n            input:\n              key1: value1\n              key2: value2\n              stageParams:\n                stage: dev\n      name: myStateMachine\n      definition:\n        Comment: \"A Hello World example of the Amazon States Language using an AWS Lambda Function\"\n        StartAt: HelloWorld1\n        States:\n          HelloWorld1:\n            Type: Task\n            Resource:\n              Fn::GetAtt: [hello, Arn]\n            End: true\n      dependsOn: CustomIamRole\n      tags:\n        Team: LamLuong\n      alarms:\n        topics:\n          ok: arn:aws:sns:us-east-1:1234567890:NotifyMe\n          alarm: arn:aws:sns:us-east-1:1234567890:NotifyMe\n          insufficientData: arn:aws:sns:us-east-1:1234567890:NotifyMe\n        metrics:\n          - executionsTimedOut\n          - executionsFailed\n          - executionsAborted\n          - metric: executionThrottled\n            treatMissingData: breaching # overrides below default\n          - executionsSucceeded\n        treatMissingData: ignore # optional\n    hellostepfunc2:\n      definition:\n        StartAt: HelloWorld2\n        States:\n          HelloWorld2:\n            Type: Task\n            Resource:\n              Fn::GetAtt: [hello, Arn]\n            End: true\n    ddbtablestepfunc:\n      definition:\n        Comment: Demonstrates how to reference a DynamoDB Table Name exported from an external CloudFormation Stack\n        StartAt: ImportDDBTableName\n        States:\n          ImportDDBTableName:\n            Type: Task\n            Resource: \"arn:aws:states:::dynamodb:updateItem\"\n            Parameters:\n              TableName:\n                Fn::ImportValue: MyExternalStack:ToDoTable:Name # imports a table name from an external stack\n              Key:\n                id:\n                  S.$: \"$.todoId\"\n              UpdateExpression: \"SET #status = :updatedStatus\"\n              ExpressionAttributeNames:\n                \"#status\": status\n              ExpressionAttributeValues:\n                \":updatedStatus\":\n                  S: DONE\n            End: true\n      dependsOn:\n        - DynamoDBTable\n        - KinesisStream\n        - CustomIamRole\n      tags:\n        Team: Atlantis\n  activities:\n    - myTask\n    - yourTask\n  validate: true # enable pre-deployment definition validation (disabled by default)",
    "command": [
      "deploy"
    ],
    "options": {
      "aws-profile": "276084501312_TymeX-AWS-Admin-Sbx"
    },
    "orgId": "c72c08a2-b8b8-4f1b-8bdd-15492dbf222e",
    "orgName": "lamluong",
    "userId": "SdPn7kXkZjkcMygX7c",
    "userName": "lamluong",
    "serviceProviderAwsAccountId": "276084501312",
    "serviceProviderAwsCfStackId": null,
    "serviceProviderAwsCfStackCreated": null,
    "serviceProviderAwsCfStackUpdated": null,
    "serviceProviderAwsCfStackStatus": null,
    "serviceProviderAwsCfStackOutputs": null
  }
}